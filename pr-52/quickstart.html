

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quickstart Guide &mdash; mom6_bathy 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            mom6_bathy
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#step-1-import-modules">Step 1: Import modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-2-create-the-horizontal-grid">Step 2: Create the horizontal grid</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#avoiding-singularity-points"><em>Avoiding singularity points</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="#grid-metrics-and-attributes"><em>Grid Metrics and Attributes</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supergrid"><em>Supergrid</em></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#step-3-create-bathymetry">Step 3: Create Bathymetry</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#predefined-bathymetry-configurations"><em>Predefined Bathymetry Configurations</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-bathymetry"><em>Custom Bathymetry</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-ridges"><em>Adding ridges</em></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#step-4-write-model-input-files">Step 4: Write Model Input Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supergrid-file"><em>Supergrid File</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="#topography-bathymetry-file"><em>Topography (Bathymetry) File</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cice-grid-file"><em>CICE grid file</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="#esmf-mesh-file"><em>ESMF Mesh file</em></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#step-5-editing-grids-and-bathymetry">Step 5: Editing Grids and Bathymetry</a></li>
<li class="toctree-l2"><a class="reference internal" href="#further-steps">Further steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets.html">Topo &amp; The Widgets!</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">mom6_bathy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mom6_bathy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Quickstart Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quickstart-guide">
<h1>Quickstart Guide<a class="headerlink" href="#quickstart-guide" title="Link to this heading"></a></h1>
<p><cite>mom6_tools</cite> library can be utilized via its Python API, i.e., directly within Python
scripts or within Jupyter notebooks. In this quickstart guide, we describe how
the tool can be utilized within a Jupyter Notebook, but the majority of
these instructions apply to Python scripts as well.</p>
<section id="step-1-import-modules">
<h2>Step 1: Import modules<a class="headerlink" href="#step-1-import-modules" title="Link to this heading"></a></h2>
<p>The first step is to import the <code class="docutils literal notranslate"><span class="pre">Grid</span></code> and <code class="docutils literal notranslate"><span class="pre">Topo</span></code> classes of the
<cite>mom6_bathy</cite> package. The <code class="docutils literal notranslate"><span class="pre">Grid</span></code> class represents
horizontal MOM6 grids, and is to be instantiated with the desired grid
configuration and resolution. After creating a grid instance, a <code class="docutils literal notranslate"><span class="pre">Topo</span></code> class
instance is to be created to generate an associated bathymetry.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mom6_bathy.grid</span><span class="w"> </span><span class="kn">import</span> <span class="n">Grid</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mom6_bathy.topo</span><span class="w"> </span><span class="kn">import</span> <span class="n">Topo</span>
</pre></div>
</div>
</section>
<section id="step-2-create-the-horizontal-grid">
<h2>Step 2: Create the horizontal grid<a class="headerlink" href="#step-2-create-the-horizontal-grid" title="Link to this heading"></a></h2>
<p>After having imported the modules, we can now create a horizontal grid.
An example Grid instantiation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span>
    <span class="n">nx</span>         <span class="o">=</span> <span class="mi">180</span><span class="p">,</span>         <span class="c1"># Number of grid points in x direction</span>
    <span class="n">ny</span>         <span class="o">=</span> <span class="mi">80</span><span class="p">,</span>          <span class="c1"># Number of grid points in y direction</span>
    <span class="n">lenx</span>       <span class="o">=</span> <span class="mf">360.0</span><span class="p">,</span>       <span class="c1"># grid length in x direction, e.g., 360.0 (degrees)</span>
    <span class="n">leny</span>       <span class="o">=</span> <span class="mi">160</span><span class="p">,</span>         <span class="c1"># grid length in y direction</span>
    <span class="n">cyclic_x</span>   <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>        <span class="c1"># reentrant, spherical domain</span>
    <span class="n">ystart</span>     <span class="o">=</span> <span class="o">-</span><span class="mf">80.0</span>        <span class="c1"># start/end 10 degrees above/below poles to avoid singularity</span>
<span class="p">)</span>
</pre></div>
</div>
<p>In the above example, the <code class="docutils literal notranslate"><span class="pre">Grid</span></code> object, named <code class="docutils literal notranslate"><span class="pre">grid</span></code>, is constructed by
specifying the required arguments <code class="docutils literal notranslate"><span class="pre">nx</span></code>, <code class="docutils literal notranslate"><span class="pre">ny</span></code>, <code class="docutils literal notranslate"><span class="pre">config</span></code>, <code class="docutils literal notranslate"><span class="pre">axis_units</span></code>,  <code class="docutils literal notranslate"><span class="pre">lenx</span></code>,
and <code class="docutils literal notranslate"><span class="pre">leny</span></code>, in addition to the optional argument <code class="docutils literal notranslate"><span class="pre">ystart</span></code>. The full list of
<code class="docutils literal notranslate"><span class="pre">Grid</span></code> arguments and their descriptions may be printed by running
<code class="docutils literal notranslate"><span class="pre">Grid?</span></code> statement on a notebook cell:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Grid?

...

Parameters
----------
nx : int
    Number of grid points in x direction
ny : int
    Number of grid points in y direction
lenx : float
    grid length in x direction, e.g., 360.0 (degrees)
leny : float
    grid length in y direction, e.g., 160.0 (degrees)
srefine : int, optional
    refinement factor for the supergrid. 2 by default
xstart : float, optional
    starting x coordinate. 0.0 by default.
ystart : float, optional
    starting y coordinate. -0.5*leny by default.
cyclic_x : bool, optional
    flag to make the grid cyclic in x direction. False by default.
tripolar_n : bool, optional
    flag to make the grid tripolar. False by default.
displace_pole : bool, optional
    flag to make the grid displaced polar. False by default.
</pre></div>
</div>
<p>Note that tripolar and displaced pole grids cannot yet be created from scratch,
but existing tripolar and displaced pole grids can be modified via mom6_bathy.</p>
<section id="avoiding-singularity-points">
<h3><em>Avoiding singularity points</em><a class="headerlink" href="#avoiding-singularity-points" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>To avoid singularity points within the ocean grid:</dt><dd><ul class="simple">
<li><p>The grid poles (which may be different than the true poles) must be left out of the grid,
by making sure that the extent of the grid in the y-direction do not cover the poles,
e.g., by setting <code class="docutils literal notranslate"><span class="pre">ystart</span></code> to -80.0 degrees
and <code class="docutils literal notranslate"><span class="pre">leny</span></code> to 160.0 degrees.</p></li>
<li><p>Alternatively, one or two singularities (typically, in the northern hemisphere) may be
displaced into land masses if <code class="docutils literal notranslate"><span class="pre">displace_pole</span></code> or <code class="docutils literal notranslate"><span class="pre">tripolar_n</span></code> options are to be used.
The other singularity (typically, in the southern hemisphere) would still need to be
left out the geographic extent of the grid.</p></li>
</ul>
</dd>
</dl>
<p>If a singularity (a pole) is present within the ocean grid, a land component (active or data) must be added
to the pose of hiding the singularity points of spherical ocean grids within the CESM framework.</p>
</section>
<section id="grid-metrics-and-attributes">
<h3><em>Grid Metrics and Attributes</em><a class="headerlink" href="#grid-metrics-and-attributes" title="Link to this heading"></a></h3>
<p>When a <code class="docutils literal notranslate"><span class="pre">Grid</span></code> instance gets created, several grid metrics and attributes
on all staggerings are automatically computed and populated. These metrics and attributes
are accessible via the accessor operator (<code class="docutils literal notranslate"><span class="pre">.</span></code>). For example, to access “the array
of t-grid longitutes” of <code class="docutils literal notranslate"><span class="pre">grid</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span><span class="o">.</span><span class="n">tlon</span>
</pre></div>
</div>
<p>The full list of grid metrics and attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tlon</span></code>: array of t-grid longitudes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tlat</span></code>: array of t-grid latitudes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ulon</span></code>: array of u-grid longitudes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ulat</span></code>: array of u-grid latitudes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vlon</span></code>: array of v-grid longitudes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vlat</span></code>: array of v-grid latitudes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">qlon</span></code>: array of corner longitudes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">qlat</span></code>: array of corner latitudes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dxt</span></code>: x-distance between U points, centered at t</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dyt</span></code>: y-distance between V points, centered at t</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dxCv</span></code>: x-distance between q points, centered at v</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dyCu</span></code>: y-distance between q points, centered at u</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dxCu</span></code>: x-distance between y points, centered at u</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dyCv</span></code>: y-distance between t points, centered at v</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle</span></code>: angle T-grid makes with latitude line</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tarea</span></code>: T-cell area</p></li>
</ul>
</section>
<section id="supergrid">
<h3><em>Supergrid</em><a class="headerlink" href="#supergrid" title="Link to this heading"></a></h3>
<p>In addition to above grid metrics and attributes, the <code class="docutils literal notranslate"><span class="pre">Grid</span></code> class incorporates an
underlying <a class="reference internal" href="glossary.html#term-supergrid"><span class="xref std std-term">supergrid</span></a> instance associated the grid instance, which is again
accessible via the (<code class="docutils literal notranslate"><span class="pre">.</span></code>) operator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span><span class="o">.</span><span class="n">supergrid</span>
</pre></div>
</div>
<p>Any user changes to coordinates, e.g., increasing the equatorial resolution,
must be applied to the supergrid using the <code class="docutils literal notranslate"><span class="pre">update_supergrid</span></code> method. This is
because the supergrid is the underlying refined grid that is used to determine the
the four staggered grids (T,U,V,Q) that forms the actual computational grid.
Users can modify the supergrid by providing a new x and y coordinate arrays, e.g.,
as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span><span class="o">.</span><span class="n">update_supergrid</span><span class="p">(</span><span class="n">xdat</span><span class="p">,</span> <span class="n">ydat</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">xdat</span></code> and <code class="docutils literal notranslate"><span class="pre">ydat</span></code> are user-defined 2-dimensional numpy arrays containing
the new x and y coordinates of the supergrid. Running the <code class="docutils literal notranslate"><span class="pre">update_supergrid</span></code>
method of a <code class="docutils literal notranslate"><span class="pre">Grid</span></code> instance automatically updates all other grid metrics listed
above.</p>
<p>Note: the supergrid implementation in <cite>mom6_bathy</cite> relies on <a class="reference external" href="https://github.com/mjharriso/MIDAS">MIDAS</a>,
a python library developed by M. Harrison (GFDL).</p>
</section>
</section>
<section id="step-3-create-bathymetry">
<h2>Step 3: Create Bathymetry<a class="headerlink" href="#step-3-create-bathymetry" title="Link to this heading"></a></h2>
<p>After having generated the horizontal grid, we can now create an associated bathymetry
using the <code class="docutils literal notranslate"><span class="pre">Topo</span></code> class of the <cite>mom6_bathy</cite> tool. We instantiate a bathymetry
object as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">topo</span> <span class="o">=</span> <span class="n">Topo</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">min_depth</span><span class="o">=</span><span class="mf">10.0</span><span class="p">)</span>
</pre></div>
</div>
<p>The first argument (<code class="docutils literal notranslate"><span class="pre">grid</span></code>) of <code class="docutils literal notranslate"><span class="pre">Topo</span></code> constructor is the horizontal grid instance for which
the bathymetry is to be created, while the second argument (<code class="docutils literal notranslate"><span class="pre">min_depth</span></code>) is the minimum ocean depth.
Any column in the ocean grid with a depth shallower than <code class="docutils literal notranslate"><span class="pre">min_depth</span></code>  is masked out of the ocean
domain. The minimum depth attribute of a bathymetry instance may be changed afterwards using the
assignment operator. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">topo</span><span class="o">.</span><span class="n">min_depth</span> <span class="o">=</span> <span class="mf">5.0</span>
</pre></div>
</div>
<section id="predefined-bathymetry-configurations">
<h3><em>Predefined Bathymetry Configurations</em><a class="headerlink" href="#predefined-bathymetry-configurations" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Topo</span></code> class provides three predefined bathymetry configurations, which are also
available in MOM6 as idealized configurations. (See <cite>TOPO_CONFIG</cite> parameter in MOM_input)</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>flat</cite>: flat bottom set to MAXIMUM_DEPTH. Example:</p></li>
<li><p><cite>bowl</cite>: an analytically specified bowl-shaped basin ranging between MAXIMUM_DEPTH and MINIMUM_DEPTH.</p></li>
<li><p><cite>spoon</cite>: a similar shape to ‘bowl’, but with an vertical wall at the southern face.</p></li>
</ul>
</div></blockquote>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># flat bottom</span>
<span class="n">topo</span><span class="o">.</span><span class="n">set_flat</span><span class="p">(</span><span class="n">D</span><span class="o">=</span><span class="mf">500.0</span><span class="p">)</span>

<span class="c1"># bowl</span>
<span class="n">topo</span><span class="o">.</span><span class="n">set_bowl</span><span class="p">(</span><span class="mf">500.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="n">expdecay</span><span class="o">=</span><span class="mf">1e7</span><span class="p">)</span>

<span class="c1"># spoon</span>
<span class="n">topo</span><span class="o">.</span><span class="n">set_spoon</span><span class="p">(</span><span class="mf">500.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="n">expdecay</span><span class="o">=</span><span class="mf">1e7</span><span class="p">)</span>
</pre></div>
</div>
<p>The first and the second arguments of <code class="docutils literal notranslate"><span class="pre">set_bowl</span></code> and <code class="docutils literal notranslate"><span class="pre">set_spoon</span></code> methods are maximum depth
and minimum depth, respectively.</p>
<p>Check out the following notebook to see examples of above predefined bathymetry options: <a class="reference external" href="https://github.com/NCAR/mom6_bathy/blob/master/notebooks/1_spherical_grid.ipynb">1_spherical_grid.ipynb</a></p>
</section>
<section id="custom-bathymetry">
<h3><em>Custom Bathymetry</em><a class="headerlink" href="#custom-bathymetry" title="Link to this heading"></a></h3>
<p>In addition to the above predefined configurations, users may provide their own depth arrays. For
example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># define a custom depth</span>
<span class="n">i</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">tlat</span><span class="o">.</span><span class="n">nx</span><span class="o">.</span><span class="n">data</span>                <span class="c1"># array of x-indices</span>
<span class="n">j</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">tlat</span><span class="o">.</span><span class="n">ny</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>  <span class="c1"># array of y-indices</span>
<span class="n">custom_depth</span> <span class="o">=</span> <span class="mf">400.0</span> <span class="o">+</span> <span class="mf">80.0</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">6.</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">j</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">6.</span><span class="p">)</span>

<span class="c1"># update the bathymetry:</span>
<span class="n">topo</span><span class="o">.</span><span class="n">depth</span> <span class="o">=</span> <span class="n">custom_depth</span>
</pre></div>
</div>
</section>
<section id="adding-ridges">
<h3><em>Adding ridges</em><a class="headerlink" href="#adding-ridges" title="Link to this heading"></a></h3>
<p>Simpler model bathymetry configurations typically include ridges to represent straits and
continents in an idealized manner. The <code class="docutils literal notranslate"><span class="pre">Topo</span></code> class provides <code class="docutils literal notranslate"><span class="pre">apply_ridge</span></code> method
to add ridges to the bathymetry. Example usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">topo</span><span class="o">.</span><span class="n">apply_ridge</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="mi">240</span><span class="p">,</span> <span class="n">ilat</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">80</span><span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
<p>Example notebook: <a class="reference external" href="https://github.com/NCAR/mom6_bathy/blob/master/notebooks/3_custom_bathy.ipynb">3_custom_bathy.ipynb</a></p>
</section>
</section>
<section id="step-4-write-model-input-files">
<h2>Step 4: Write Model Input Files<a class="headerlink" href="#step-4-write-model-input-files" title="Link to this heading"></a></h2>
<p>The final step of <cite>mom6_bathy</cite> workflow is to write out the netcdf files containing grid
and bathymetry data. These files are to be read in by CESM and MOM6 during runtime.</p>
<section id="supergrid-file">
<h3><em>Supergrid File</em><a class="headerlink" href="#supergrid-file" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">write_supergrid</span></code> method of a <code class="docutils literal notranslate"><span class="pre">Grid</span></code> instance writes out the MOM6 supergrid file
in netcdf format. The <code class="docutils literal notranslate"><span class="pre">GRID_FILE</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">MOM_input</span></code> file can then be set to
the path of the supergrid file written by the <code class="docutils literal notranslate"><span class="pre">Grid</span></code> instance.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span><span class="o">.</span><span class="n">write_supergrid</span><span class="p">(</span><span class="s2">&quot;my_ocean_hgrid.nc&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The supergrid file is the only input file that is written by the <cite>Grid</cite> class. All other
input files require either topography (depth) or mask information. Hence, they are to be
written by the <cite>Topo</cite> class.</p>
</section>
<section id="topography-bathymetry-file">
<h3><em>Topography (Bathymetry) File</em><a class="headerlink" href="#topography-bathymetry-file" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">write_topo</span></code> method of the <code class="docutils literal notranslate"><span class="pre">Topo</span></code> class writes out the MOM6 bathymetry file in netcdf format.
<code class="docutils literal notranslate"><span class="pre">TOPO_FILE</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">MOM_input</span></code> file can then be set to the path of the topography file
written by the <code class="docutils literal notranslate"><span class="pre">Topo</span></code> instance.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">topo</span><span class="o">.</span><span class="n">write_topo</span><span class="p">(</span><span class="s2">&quot;my_ocean_topog.nc&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="cice-grid-file">
<h3><em>CICE grid file</em><a class="headerlink" href="#cice-grid-file" title="Link to this heading"></a></h3>
<p>If the model is to be run with the CICE component, the <code class="docutils literal notranslate"><span class="pre">write_cice_grid</span></code> method of the
<code class="docutils literal notranslate"><span class="pre">Topo</span></code> class writes out the CICE grid file in netcdf format. The relevant CICE namelist
parameters can then be updated to read in the CICE grid file written by the <code class="docutils literal notranslate"><span class="pre">Topo</span></code> instance.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">topo</span><span class="o">.</span><span class="n">write_cice_grid</span><span class="p">(</span><span class="s2">&quot;my_cice_grid.nc&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="esmf-mesh-file">
<h3><em>ESMF Mesh file</em><a class="headerlink" href="#esmf-mesh-file" title="Link to this heading"></a></h3>
<p>In addition to the MOM6 supergrid file, MOM6 topography file and CICE grid file, an
ESMF mesh file is required when running CESM. The ESMF mesh file is used
by the NUOPC coupler to acquire grid and mask information. The <code class="docutils literal notranslate"><span class="pre">write_esmf_mesh</span></code> method
of the <code class="docutils literal notranslate"><span class="pre">Topo</span></code> class writes out the ESMF mesh file in netcdf format.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">topo</span><span class="o">.</span><span class="n">write_esmf_mesh</span><span class="p">(</span><span class="s2">&quot;my_esmf_mesh.nc&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="step-5-editing-grids-and-bathymetry">
<h2>Step 5: Editing Grids and Bathymetry<a class="headerlink" href="#step-5-editing-grids-and-bathymetry" title="Link to this heading"></a></h2>
<p>Beyond creating standard grids and simple topographies, mom6_bathy provides advanced tools
for interactively editing and creating complex model domains. These features are designed to
facilitate reproducible workflows for custom model configurations and model tuning. These
domain configurators can be used for tasks such as:</p>
<ul class="simple">
<li><p>Editing Bathymetry: Manually or programmatically modifying ocean depths.</p></li>
<li><p>Creating New Grids: Defining entirely new horizontal grid structures.</p></li>
<li><p>Creating Vertical Grids: Specifying the vertical layering of the ocean model.</p></li>
</ul>
<p>Check out the notebook for examples of these advanced features:
<a class="reference external" href="https://github.com/NCAR/mom6_bathy/blob/master/notebooks/6_demo_editors.ipynb">6_demo_editors.ipynb</a></p>
</section>
<section id="further-steps">
<h2>Further steps<a class="headerlink" href="#further-steps" title="Link to this heading"></a></h2>
<p>The remaining steps of configuring the model, which include specifying initial conditions,
forcings, and runtime parameters, are beyond the scope of the <cite>mom6_bathy</cite> tool. Note that a
complementary tool called <cite>visualCaseGen</cite>, which includes <cite>mom6_bathy</cite> as a submodule, can be used
to generate a complete model configuration. <cite>visualCaseGen</cite> provides a graphical user interface
to set up the model grid, bathymetry, initial conditions, forcing, and runtime parameters for MOM6
and other CESM components. Hence, new users are encouraged to use <cite>visualCaseGen</cite> for a complete
model configuration. See: <a class="reference external" href="https://github.com/ESMCI/visualCaseGen">visualCaseGen</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="examples.html" class="btn btn-neutral float-right" title="Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, NCAR.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
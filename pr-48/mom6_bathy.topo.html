

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>mom6_bathy.topo module &mdash; mom6_bathy 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="mom6_bathy.grid module" href="mom6_bathy.grid.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            mom6_bathy
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets.html">Topo &amp; The Widgets!</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">mom6_bathy</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="mom6_bathy.html">mom6_bathy package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="mom6_bathy.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="mom6_bathy.grid.html">mom6_bathy.grid module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">mom6_bathy.topo module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mom6_bathy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">mom6_bathy</a></li>
          <li class="breadcrumb-item"><a href="mom6_bathy.html">mom6_bathy package</a></li>
      <li class="breadcrumb-item active">mom6_bathy.topo module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/mom6_bathy.topo.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-mom6_bathy.topo">
<span id="mom6-bathy-topo-module"></span><h1>mom6_bathy.topo module<a class="headerlink" href="#module-mom6_bathy.topo" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mom6_bathy.topo.</span></span><span class="sig-name descname"><span class="pre">Topo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version_control_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'TopoLibrary'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Bathymetry Generator for MOM6 grids (mom6_bathy.grid.Grid).</p>
<p>MOM6 Simpler Models bathymetry constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grid</strong> (<a class="reference internal" href="mom6_bathy.grid.html#mom6_bathy.grid.Grid" title="mom6_bathy.grid.Grid"><em>mom6_bathy.grid.Grid</em></a>) – horizontal grid instance for which the bathymetry is to be created.</p></li>
<li><p><strong>min_depth</strong> (<em>float</em>) – Minimum water column depth. Columns with shallow depths are to be masked out.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.apply_edit">
<span class="sig-name descname"><span class="pre">apply_edit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.apply_edit" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.apply_land_frac">
<span class="sig-name descname"><span class="pre">apply_land_frac</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">landfrac_filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">landfrac_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xcoord_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ycoord_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth_fillval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_frac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'bilinear'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.apply_land_frac" title="Link to this definition"></a></dt>
<dd><p>Given a dataset containing land fraction, generate and apply ocean mask.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>landfrac_filepath</strong> (<em>str</em>) – Path the netcdf file containing the land fraction field.</p></li>
<li><p><strong>landfrac_name</strong> (<em>str</em>) – The field name corresponding to the land fraction  (e.g., “landfrac”).</p></li>
<li><p><strong>xcoord_name</strong> (<em>str</em>) – The name of the x coordinate of the landfrac dataset (e.g., “lon”).</p></li>
<li><p><strong>ycoord_name</strong> (<em>str</em>) – The name of the y coordinate of the landfrac dataset (e.g., “lat”).</p></li>
<li><p><strong>depth_fillval</strong> (<em>float</em>) – The depth value for dry cells.</p></li>
<li><p><strong>cutoff_frac</strong> (<em>float</em>) – Cells with landfrac &gt; cutoff_frac are deemed land cells.</p></li>
<li><p><strong>method</strong> (<em>str</em>) – Mapping method for determining the ocean mask (lnd -&gt; ocn)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.apply_ridge">
<span class="sig-name descname"><span class="pre">apply_ridge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ilat</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.apply_ridge" title="Link to this definition"></a></dt>
<dd><p>Apply a ridge to the bathymetry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>height</strong> (<em>float</em>) – Height of the ridge to be added.</p></li>
<li><p><strong>width</strong> (<em>float</em>) – Width of the ridge to be added.</p></li>
<li><p><strong>lon</strong> (<em>float</em>) – Longitude where the ridge is to be centered.</p></li>
<li><p><strong>ilat</strong> (<em>pair</em><em> of </em><em>integers</em>) – Initial and final latitude indices for the ridge.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.basintmask">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">basintmask</span></span><a class="headerlink" href="#mom6_bathy.topo.Topo.basintmask" title="Link to this definition"></a></dt>
<dd><p>Ocean domain mask at T grid. Seperate number for each connected water cell, 0 if land.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.config_dataset">
<span class="sig-name descname"><span class="pre">config_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bathymetry_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">longitude_coordinate_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latitude_coordinate_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertical_coordinate_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_channels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positive_down</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">PosixPath('.')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_to_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.config_dataset" title="Link to this definition"></a></dt>
<dd><p>Sets up necessary objects/files for regridding bathymetry. Can be flexibly used with
mapping.regrid_bathy_dataset() or user can manually regrid with ESMF_regrid.</p>
<p>If manual regridding is necessary, write_to_file must be set to True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bathymetry_path</strong> (<em>str</em>) – Path to netCDF file with bathymetry data.</p></li>
<li><p><strong>longitude_coordinate_name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – The name of the longitude coordinate in the bathymetry
dataset at <code class="docutils literal notranslate"><span class="pre">bathymetry_path</span></code>. For example, for GEBCO bathymetry: <code class="docutils literal notranslate"><span class="pre">'lon'</span></code> (default).</p></li>
<li><p><strong>latitude_coordinate_name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – The name of the latitude coordinate in the bathymetry
dataset at <code class="docutils literal notranslate"><span class="pre">bathymetry_path</span></code>. For example, for GEBCO bathymetry: <code class="docutils literal notranslate"><span class="pre">'lat'</span></code> (default).</p></li>
<li><p><strong>vertical_coordinate_name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – The name of the vertical coordinate in the bathymetry
dataset at <code class="docutils literal notranslate"><span class="pre">bathymetry_path</span></code>. For example, for GEBCO bathymetry: <code class="docutils literal notranslate"><span class="pre">'elevation'</span></code> (default).</p></li>
<li><p><strong>output_dir</strong> – str | Path
The str or Path the write to file should write to. Defaults to the directory the script is running in.</p></li>
<li><p><strong>write_to_file</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – Files saved to <code class="docutils literal notranslate"><span class="pre">output_dir</span></code>. Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>. Must be set to true if using manual regridding methods with ESMF_regrid.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>where <code class="docutils literal notranslate"><span class="pre">bathymetry_output</span></code> is the original bathymetry data with proper metadata and attributes and <code class="docutils literal notranslate"><span class="pre">empty_bathy</span></code> is a template for the regridder.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<code class="docutils literal notranslate"><span class="pre">bathymetry_output</span></code>,``empty_bathy``) (tuple of Datasets)</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.depth">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">depth</span></span><a class="headerlink" href="#mom6_bathy.topo.Topo.depth" title="Link to this definition"></a></dt>
<dd><p>MOM6 grid depth array (m). Positive below MSL.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.erase_disconnected_basin">
<span class="sig-name descname"><span class="pre">erase_disconnected_basin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">j</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.erase_disconnected_basin" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.erase_selected_basin">
<span class="sig-name descname"><span class="pre">erase_selected_basin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">j</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.erase_selected_basin" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.from_topo_file">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_topo_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topo_file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.from_topo_file" title="Link to this definition"></a></dt>
<dd><p>Create a bathymetry object from an existing topog file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grid</strong> (<a class="reference internal" href="mom6_bathy.grid.html#mom6_bathy.grid.Grid" title="mom6_bathy.grid.Grid"><em>mom6_bathy.grid.Grid</em></a>) – horizontal grid instance for which the bathymetry is to be created.</p></li>
<li><p><strong>topo_file_path</strong> (<em>str</em>) – Path to an existing MOM6 topog file.</p></li>
<li><p><strong>min_depth</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum water column depth (m). Columns with shallower depths are to be masked out.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.from_topo_version_control">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_topo_version_control</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.from_topo_version_control" title="Link to this definition"></a></dt>
<dd><p>Create a bathymetry object from an existing topog file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>directory</strong> (<em>str</em>) – Path to an existing MOM6 topog file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.from_version_control">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_version_control</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.from_version_control" title="Link to this definition"></a></dt>
<dd><p>Create a bathymetry object from an existing version-controlled bathymetry folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>folder_path</strong> (<em>str</em><em> | </em><em>Path</em>) – Path to an existing bathymetry folder created by mom6_bathy with version control enabled.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.gen_topo_ds">
<span class="sig-name descname"><span class="pre">gen_topo_ds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.gen_topo_ds" title="Link to this definition"></a></dt>
<dd><p>Write the TOPO_FILE (bathymetry file) in xarray Dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – File title.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.max_depth">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_depth</span></span><a class="headerlink" href="#mom6_bathy.topo.Topo.max_depth" title="Link to this definition"></a></dt>
<dd><p>Maximum water column depth.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.min_depth">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">min_depth</span></span><a class="headerlink" href="#mom6_bathy.topo.Topo.min_depth" title="Link to this definition"></a></dt>
<dd><p>Minimum water column depth. Columns with shallow depths are to be masked out.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.mpi_set_from_dataset">
<span class="sig-name descname"><span class="pre">mpi_set_from_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bathymetry_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">longitude_coordinate_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latitude_coordinate_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertical_coordinate_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_channels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positive_down</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">PosixPath('.')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_to_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.mpi_set_from_dataset" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.point_is_ocean">
<span class="sig-name descname"><span class="pre">point_is_ocean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lons</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lats</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.point_is_ocean" title="Link to this definition"></a></dt>
<dd><p>Given a list of coordinates, return a list of booleans indicating if the coordinates are in the ocean (True) or land (False)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.qmask">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">qmask</span></span><a class="headerlink" href="#mom6_bathy.topo.Topo.qmask" title="Link to this definition"></a></dt>
<dd><p>Ocean domain mask on Q grid. 1 if ocean, 0 if land.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.redo_last_edit">
<span class="sig-name descname"><span class="pre">redo_last_edit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.redo_last_edit" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.save" title="Link to this definition"></a></dt>
<dd><p>Save the TOPO_FILE (bathymetry file) in netcdf format to version control</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.set_bowl">
<span class="sig-name descname"><span class="pre">set_bowl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dedge</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rad_earth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6378000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expdecay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400000.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.set_bowl" title="Link to this definition"></a></dt>
<dd><p>Create a bowl-shaped bathymetry. Same effect as setting the TOPO_CONFIG parameter to “bowl”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_depth</strong> (<em>float</em>) – Maximum depth of model in the units of D.</p></li>
<li><p><strong>dedge</strong> (<em>float</em>) – The depth [Z ~&gt; m], at the basin edge</p></li>
<li><p><strong>rad_earth</strong> (<em>float</em><em>, </em><em>optional</em>) – Radius of earth</p></li>
<li><p><strong>expdecay</strong> (<em>float</em><em>, </em><em>optional</em>) – A decay scale of associated with the sloping boundaries [m]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.set_depth_via_topog_file">
<span class="sig-name descname"><span class="pre">set_depth_via_topog_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topog_file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quietly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.set_depth_via_topog_file" title="Link to this definition"></a></dt>
<dd><p>Apply a bathymetry read from an existing topog file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>topog_file_path</strong> (<em>str</em>) – absolute path to an existing MOM6 topog file</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.set_flat">
<span class="sig-name descname"><span class="pre">set_flat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">D</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.set_flat" title="Link to this definition"></a></dt>
<dd><p>Create a flat bottom bathymetry with a given depth D.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>D</strong> (<em>float</em>) – Bathymetric depth of the flat bottom to be generated.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.set_from_dataset">
<span class="sig-name descname"><span class="pre">set_from_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bathymetry_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">longitude_coordinate_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latitude_coordinate_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertical_coordinate_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_channels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positive_down</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">PosixPath('.')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_to_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regridding_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'bilinear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_config_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_regrid_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_tidy_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.set_from_dataset" title="Link to this definition"></a></dt>
<dd><p>This code was originally written by Ashley Barnes in regional_mom6(<a class="reference external" href="https://github.com/COSIMA/regional-mom6">https://github.com/COSIMA/regional-mom6</a>) and adapted for this package.</p>
<p>Cut out and interpolate the chosen bathymetry and then fill inland lakes.</p>
<p>Users can optionally fill narrow channels (see <code class="docutils literal notranslate"><span class="pre">fill_channels</span></code> keyword argument
below). Note, however, that narrow channels are less of an issue for models that
are discretized on an Arakawa C grid, like MOM6.</p>
<p>Output is saved in the output_dir.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bathymetry_path</strong> (<em>str</em>) – Path to the netCDF file with the bathymetry.</p></li>
<li><p><strong>longitude_coordinate_name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – The name of the longitude coordinate in the bathymetry
dataset at <code class="docutils literal notranslate"><span class="pre">bathymetry_path</span></code>. For example, for GEBCO bathymetry: <code class="docutils literal notranslate"><span class="pre">'lon'</span></code> (default).</p></li>
<li><p><strong>latitude_coordinate_name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – The name of the latitude coordinate in the bathymetry
dataset at <code class="docutils literal notranslate"><span class="pre">bathymetry_path</span></code>. For example, for GEBCO bathymetry: <code class="docutils literal notranslate"><span class="pre">'lat'</span></code> (default).</p></li>
<li><p><strong>vertical_coordinate_name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – The name of the vertical coordinate in the bathymetry
dataset at <code class="docutils literal notranslate"><span class="pre">bathymetry_path</span></code>. For example, for GEBCO bathymetry: <code class="docutils literal notranslate"><span class="pre">'elevation'</span></code> (default).</p></li>
<li><p><strong>fill_channels</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – Whether or not to fill in
diagonal channels. This removes more narrow inlets,
but can also connect extra islands to land. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>positive_down</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, it assumes that the
bathymetry vertical coordinate is positive downwards. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>write_to_file</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – Whether to write the bathymetry to a file. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>regridding_method</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – The type of regridding method to use. Defaults to self.regridding_method</p></li>
<li><p><strong>run_*</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – Whether to run the respective step in the bathymetry processing. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.set_spoon">
<span class="sig-name descname"><span class="pre">set_spoon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dedge</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rad_earth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6378000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expdecay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400000.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.set_spoon" title="Link to this definition"></a></dt>
<dd><p>Create a spoon-shaped bathymetry. Same effect as setting the TOPO_CONFIG
parameter to “spoon”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_depth</strong> (<em>float</em>) – Maximum depth of model in the units of D.</p></li>
<li><p><strong>dedge</strong> (<em>float</em>) – The depth [Z ~&gt; m], at the basin edge</p></li>
<li><p><strong>rad_earth</strong> (<em>float</em><em>, </em><em>optional</em>) – Radius of earth</p></li>
<li><p><strong>expdecay</strong> (<em>float</em><em>, </em><em>optional</em>) – A decay scale of associated with the sloping boundaries [m]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.supergridmask">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">supergridmask</span></span><a class="headerlink" href="#mom6_bathy.topo.Topo.supergridmask" title="Link to this definition"></a></dt>
<dd><p>Ocean domain mask on supergrid. 1 if ocean, 0 if land.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.tidy_dataset">
<span class="sig-name descname"><span class="pre">tidy_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fill_channels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positive_down</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertical_coordinate_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'depth'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bathymetry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">PosixPath('.')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_to_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">longitude_coordinate_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lon'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latitude_coordinate_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lat'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.tidy_dataset" title="Link to this definition"></a></dt>
<dd><p>An auxiliary method for bathymetry used to fix up the metadata and remove inland
lakes after regridding the bathymetry. Having <a class="reference internal" href="#mom6_bathy.topo.Topo.tidy_dataset" title="mom6_bathy.topo.Topo.tidy_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">tidy_dataset()</span></code></a> as a separate
method from <code class="xref py py-func docutils literal notranslate"><span class="pre">setup_bathymetry()</span></code> allows for the regridding to be done separately,
since regridding can be really expensive for large domains.</p>
<p>If the bathymetry is already regridded and what is left to be done is fixing the metadata
or fill in some channels, then <a class="reference internal" href="#mom6_bathy.topo.Topo.tidy_dataset" title="mom6_bathy.topo.Topo.tidy_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">tidy_dataset()</span></code></a> directly can read the existing
<code class="docutils literal notranslate"><span class="pre">bathymetry_unfinished.nc</span></code> file that should be in the input directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fill_channels</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – Whether to fill in diagonal channels.
This removes more narrow inlets, but can also connect extra islands to land.
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>positive_down</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – If <code class="docutils literal notranslate"><span class="pre">False</span></code> (default), assume that
bathymetry vertical coordinate is positive down, as is the case in GEBCO for example.</p></li>
<li><p><strong>bathymetry</strong> (<em>Optional</em><em>[</em><em>xr.Dataset</em><em>]</em>) – The bathymetry dataset to tidy up. If not provided,
it will read the bathymetry from the file <code class="docutils literal notranslate"><span class="pre">bathymetry_unfinished.nc</span></code> in the input directory
that was created by <code class="xref py py-func docutils literal notranslate"><span class="pre">config/regrid_dataset()</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.tmask">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tmask</span></span><a class="headerlink" href="#mom6_bathy.topo.Topo.tmask" title="Link to this definition"></a></dt>
<dd><p>Ocean domain mask at T grid. 1 if ocean, 0 if land.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.umask">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">umask</span></span><a class="headerlink" href="#mom6_bathy.topo.Topo.umask" title="Link to this definition"></a></dt>
<dd><p>Ocean domain mask on U grid. 1 if ocean, 0 if land.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.undo_last_edit">
<span class="sig-name descname"><span class="pre">undo_last_edit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.undo_last_edit" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.vmask">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">vmask</span></span><a class="headerlink" href="#mom6_bathy.topo.Topo.vmask" title="Link to this definition"></a></dt>
<dd><p>Ocean domain mask on V grid. 1 if ocean, 0 if land.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.write_cice_grid">
<span class="sig-name descname"><span class="pre">write_cice_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.write_cice_grid" title="Link to this definition"></a></dt>
<dd><p>Write the CICE grid file in netcdf format. The written file is
to be read in by CICE during runtime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file_path</strong> (<em>str</em>) – Path to CICE grid file to be written.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.write_esmf_mesh">
<span class="sig-name descname"><span class="pre">write_esmf_mesh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.write_esmf_mesh" title="Link to this definition"></a></dt>
<dd><p>Write the ESMF mesh file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> (<em>str</em>) – Path to ESMF mesh file to be written.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – File title.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.write_scrip_grid">
<span class="sig-name descname"><span class="pre">write_scrip_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.write_scrip_grid" title="Link to this definition"></a></dt>
<dd><p>Write the SCRIP grid file. In latest CESM versions, SCRIP grid files are
no longer required and are replaced by ESMF mesh files. However, SCRIP
files are still needed to generate custom ocean-runoff mapping files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> (<em>str</em>) – Path to SCRIP file to be written.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – File title.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mom6_bathy.topo.Topo.write_topo">
<span class="sig-name descname"><span class="pre">write_topo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mom6_bathy.topo.Topo.write_topo" title="Link to this definition"></a></dt>
<dd><p>Write the TOPO_FILE (bathymetry file) in netcdf format. The written file is
to be read in by MOM6 during runtime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> (<em>str</em>) – Path to TOPO_FILE to be written.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – File title.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mom6_bathy.grid.html" class="btn btn-neutral float-left" title="mom6_bathy.grid module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, NCAR.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>